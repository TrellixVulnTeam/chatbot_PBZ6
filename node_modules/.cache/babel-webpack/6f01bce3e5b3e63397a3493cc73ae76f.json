{"ast":null,"code":"import { scan } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/chat.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\n\nconst _c0 = function (a0, a1) {\n  return {\n    \"from\": a0,\n    \"to\": a1\n  };\n};\n\nfunction ChatEngComponent_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 4);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const message_r1 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(2, _c0, message_r1.sentBy === \"bot\", message_r1.sentBy === \"user\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", message_r1.content, \" \");\n  }\n}\n\n;\nexport class ChatEngComponent {\n  // text!: any;\n  // cht:any;\n  constructor(chat) {\n    this.chat = chat;\n    this.counVal = 0;\n  }\n\n  ngOnInit() {\n    // var val = \"friday\";\n    // var val = {\n    // \"text\": \"friday\"\n    // };\n    // this.chat.talk(val).subscribe(res => console.log(res));\n    // Appends to array after each new message is added to feedSource\n    this.messages = this.chat.conversation.asObservable().pipe(scan((acc, val) => acc.concat(val)));\n  }\n\n  sendMessage() {\n    if (itemCount > 0 && itemCount <= 5) {\n      discount = 5;\n    } else if (itemCount > 5 && itemCount <= 10) {\n      discount = 10;\n    } else {\n      discount = 15;\n    }\n\n    this.sessionVal = \"\";\n    var cht = {\n      text: this.formValue,\n      session_val: this.sessionVal\n    };\n    this.chat.sendMessage(cht).subscribe(res => console.log('entered value ==', res));\n    this.chat.converse(cht);\n    this.formValue = \"\";\n  }\n\n}\n\nChatEngComponent.ɵfac = function ChatEngComponent_Factory(t) {\n  return new (t || ChatEngComponent)(i0.ɵɵdirectiveInject(i1.ChatService));\n};\n\nChatEngComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ChatEngComponent,\n  selectors: [[\"app-chat-eng\"]],\n  decls: 11,\n  vars: 4,\n  consts: [[4, \"ngFor\", \"ngForOf\"], [\"for\", \"nameField\"], [\"type\", \"text\", 3, \"ngModel\", \"ngModelChange\", \"keyup.enter\"], [3, \"click\"], [1, \"message\", 3, \"ngClass\"]],\n  template: function ChatEngComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h3\");\n      i0.ɵɵtext(1, \"Conversation Window\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(2, ChatEngComponent_ng_container_2_Template, 3, 5, \"ng-container\", 0);\n      i0.ɵɵpipe(3, \"async\");\n      i0.ɵɵelementStart(4, \"label\", 1);\n      i0.ɵɵtext(5, \"Type your Message here:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"input\", 2);\n      i0.ɵɵlistener(\"ngModelChange\", function ChatEngComponent_Template_input_ngModelChange_6_listener($event) {\n        return ctx.formValue = $event;\n      })(\"keyup.enter\", function ChatEngComponent_Template_input_keyup_enter_6_listener() {\n        return ctx.sendMessage();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(7, \"br\");\n      i0.ɵɵelement(8, \"br\");\n      i0.ɵɵelementStart(9, \"button\", 3);\n      i0.ɵɵlistener(\"click\", function ChatEngComponent_Template_button_click_9_listener() {\n        return ctx.sendMessage();\n      });\n      i0.ɵɵtext(10, \"Send\");\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(3, 2, ctx.messages));\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.formValue);\n    }\n  },\n  directives: [i2.NgForOf, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel, i2.NgClass],\n  pipes: [i2.AsyncPipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJjaGF0LWVuZy5jb21wb25lbnQuY3NzIn0= */\"]\n});","map":{"version":3,"sources":["D:\\Haji_bhai\\Angular\\testCB\\src\\app\\chat-eng\\chat-eng.component.ts","D:\\Haji_bhai\\Angular\\testCB\\src\\app\\chat-eng\\chat-eng.component.html"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ChatService, Message } from 'src/app/chat.service';\nimport { Observable } from 'rxjs';\nimport { scan } from 'rxjs/operators';;\n\n@Component({\n  selector: 'app-chat-eng',\n  templateUrl: './chat-eng.component.html',\n  styleUrls: ['./chat-eng.component.css']\n})\nexport class ChatEngComponent implements OnInit {\n\n  messages!: Observable<Message[]>;\n  formValue!: any;\n  sessionVal!: string;\n  counVal = 0;\n  // text!: any;\n  // cht:any;\n\n  constructor(private chat: ChatService) { }\n\n  ngOnInit(): void {\n      // var val = \"friday\";\n\n      // var val = {\n        // \"text\": \"friday\"\n      // };\n      // this.chat.talk(val).subscribe(res => console.log(res));\n\n\n      // Appends to array after each new message is added to feedSource\n      this.messages = this.chat.conversation.asObservable()\n      .pipe(scan((acc, val) => acc.concat(val)));\n\n  }\n  \n  sendMessage() {\n    if (itemCount > 0 && itemCount <= 5) {\n      discount = 5;  \n    } else if (itemCount > 5 && itemCount <= 10) {\n        discount = 10; \n    } else {\n        discount = 15;\n    }\n\n    this.sessionVal = \"\";\n    var cht = {text: this.formValue,\n              session_val: this.sessionVal};\n    this.chat.sendMessage(cht).subscribe(res => console.log('entered value ==', res))\n    this.chat.converse(cht);\n    \n\n\n    this.formValue = \"\";\n\n  }\n\n}\n\n\n// sendMessage() {\n//   this.chat.converse(this.formValue);\n\n//   this.formValue = \"\";\n// }","<h3>Conversation Window</h3>\n\n\n<ng-container *ngFor=\"let message of messages | async\">\n\n    <div class=\"message\" [ngClass]=\"{ 'from': message.sentBy === 'bot',\n                                        'to': message.sentBy === 'user' }\">\n        {{ message.content }}\n        \n    </div>\n\n</ng-container>\n\n<label for=\"nameField\">Type your Message here:</label>\n\n<input [(ngModel)]=\"formValue\" (keyup.enter)=\"sendMessage()\" type=\"text\"><br><br>\n\n<button (click)=\"sendMessage()\">Send</button>\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}